<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Suche"></meta><meta name="search.results" content="Suchresultat"></meta><meta name="no.search.results" content=""></meta><script type="text/javascript">
var theme = '1';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'de';
			window.enterKey = 'search';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			
					var collapseTocSectionOnLinkTitleClick = false;
				</script><title>Profiling durch Code-Instrumentierung</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/jquery.paligocode.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><meta name="keywords" content="V1.3.1.0"></meta><link rel="prev" href="_prf_profiling_methods_overview.html" title="Profiling durchführen"></link><link rel="next" href="_prf_using_profiling_by_instrumentation.html#idp1772" title="Aktivieren und Durchführen des Profilings mit Hilfe von Instrumentierung"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script><script type="text/javascript">
			$(document).on('ready ajaxComplete', function() {
				
				hljs.addPlugin(mergeHTMLPlugin);
				hljs.configure({'ignoreUnescapedHTML': true});
				
				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightElement(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script>
<meta name="geo.region" content="Kempten" />
<meta name="geo.country" content="Germany" />
<meta name="geo.placename" content="Memminger Stra&szlig;e 151, 87439 Kempten" />
<meta name="geo.position" content="47.321;10.573" />
<meta name="ICBM" content="47.321;10.573" />
<meta property="og:type" content="article">
<meta property="og:title" content="CODESYS Group">
<meta property="og:image" content="https://www.codesys.com/images/og/CODESYS-default.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="628" />
<meta name="robots" content="index, follow, noarchive">

<link rel="shortcut icon" href="https://www.codesys.com/favicon.ico" type="image/x-icon; charset=binary">
<link rel="icon" href="https://www.codesys.com/favicon.ico" type="image/x-icon; charset=binary">

<link href="https://www.codesys.com/paligo/cs-el-lib.css" rel="stylesheet">


<script type="importmap">
    { "imports": {
        "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js",
        "vue-i18n": "https://unpkg.com/vue-i18n@11/dist/vue-i18n.esm-browser.js"
        }
    }</script>
<script src="https://www.codesys.com/paligo/cs-el-lib.js" type="module"></script>

</head><body class="theme1 page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div>
<header id="page-header"></header>

<div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=de"><img id="logotype-pageheader" src="../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" placeholder="Suche" class="form-control search-field" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="index.html">CODESYS Profiler</a></li><li class="breadcrumb-link"><a href="_prf_profiling_methods_overview.html">Profiling durchführen</a></li><li class="breadcrumb-node">Profiling durch Code-Instrumentierung</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="_prf_profiling_methods_overview.html">Zurück</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="_prf_using_profiling_by_instrumentation.html#idp1772">Weiter</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="de" lang="de" dir="ltr" class="section" data-origin-id="UUID-89d84283-8d86-8781-8603-b42af41eed22" data-permalink="_prf_using_profiling_by_instrumentation.html" data-topic-level="1" data-relative-prefix="" data-time-modified="August 18, 2021" data-publication-date="" id="UUID-526ddabd-8be1-8c72-0d8c-9bd074757f66"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Profiling durch Code-Instrumentierung</h1></div></div></div><div xml:lang="de" lang="de" dir="ltr" class="important" id="UUID-526ddabd-8be1-8c72-0d8c-9bd074757f66_UUID-8c6df3bb-66b1-4f34-7635-3129d98920dc"><h3 class="title">Wichtig</h3><p>Der implizit hinzugefügte IEC-Code für eine Profiler-Messmethode, sowie die Haltepunkte bei Bausteinen in der Überwachungsliste bewirken eine Veränderung und Verlangsamung des ausgewerteten Programms!</p><p id="UUID-526ddabd-8be1-8c72-0d8c-9bd074757f66_para-idm53255943992110">Wenn eine Profiling- oder die Codeabdeckungsmessung aktiv ist, ist kein Online-Change möglich. Außerdem stehen einige Onlinefunktionalitäten nicht zur Verfügung, wie beispielsweise „Ablaufkontrolle“ und „Haltepunkte“. Für die Überwachungsliste gibt es diesbezüglich keine Einschränkungen.</p><p id="UUID-526ddabd-8be1-8c72-0d8c-9bd074757f66_para-idm53255944097342">Das Ein- und Ausschalten einer Profiler-Messmethode oder das Ändern von Einstellungen im Profiler-Editor erzwingt jeweils einen Download. Ein Online-Change ist dann nicht mehr möglich. Für die Überwachungsliste gibt es diesbezüglich keine Einschränkungen.</p></div><div dir="ltr" class="tip"><h3 class="title">Tipp</h3><p>Die Aufzeichnung und die Verarbeitung der Messwerte findet auf der Steuerung statt und kann daher (im Gegensatz zu den anderen Messmethoden) auch ohne Verbindung des Entwicklungssystems mit der Steuerung erfolgen.</p></div><p>Bei dieser Profiling-Methode baut <span class="phrase">CODESYS Profiler</span> bei jeder Funktion des Programms zusätzlichen Code in den Funktionseintritt und – austritt ein. Die Laufzeiten eines kompletten Taskzyklus werden gemessen und gespeichert.</p><p>Die Methode ist dafür geeignet, einzelne Ausreißer in den Tasklaufzeiten aufzuspüren. Wählen Sie dazu am Besten den Aufzeichnungsmodus <span class="guilabel">Längsten Zyklus aufzeichnen</span>.</p><p>Wenn das gesamte Projekt instrumentiert wird, kann das sehr großen Einfluss auf die Tasklaufzeiten und den Speicherverbrauch haben. Wählen Sie deshalb soweit möglich nur einen Teil der Applikationsbausteine zur Instrumentierung aus. Eine zu empfehlende Taktik ist folgende: Wählen Sie zunächst nur Bausteine aus, die direkt von der Task aufgerufen werden. Ermitteln Sie für diese Bausteine die „Hot Spots“ der Laufzeit und wählen Sie davon ausgehend wiederum die aufgerufenen Bausteine zur Messung aus.</p><div dir="ltr" class="important"><h3 class="title">Wichtig</h3><div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><p>Ein nicht zur Messung ausgewählter Baustein erscheint weder in der Liste der Messungen, noch im Aufrufbaum oder in der Rückverfolgungsansicht. Es kann somit sein, dass ein Aufrufbaum „Baustein1 -&gt; Baustein3“ angezeigt wird, obwohl es keinen direkten Aufruf von Baustein3 durch Baustein1 gibt. Ursache: Zwischen Baustein1 und Baustein3 liegen Aufrufe von nicht für die Messung ausgewählten Bausteinen.</p></li><li class="listitem"><p>Die in der Messung ausgegebene „eigene Zeit“ für einen Baustein kann auch Zeiten von aufgerufenen Bausteinen enthalten, die nicht zur Messung ausgewählt sind.</p></li></ul></div></div><section dir="ltr" class="section internal" data-origin-id="" data-publication-date="" id="idp1772"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Aktivieren und Durchführen des Profilings mit Hilfe von Instrumentierung</h2></div></div></div><p>Voraussetzung:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ein <span class="phrase">CODESYS</span>-Projekt mit einer Applikation aus verschiedenen Bausteinen ist im Offlinebetrieb geöffnet.</p></li><li class="listitem"><p>Sie haben eine Task definiert, die den Aufruf der Bausteine steuert.</p></li><li class="listitem"><p>Die Applikation ist die aktive Applikation und fehlerfrei übersetzt.</p></li><li class="listitem"><p>Eine Verbindung zur Standardsteuerung ist in den Kommunikationseinstellungen konfiguriert und die Steuerung läuft.</p></li></ul></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Um das Profiling programmatisch aktiveren und deaktivieren zu können, definieren Sie in der Applikation eine boolsche Variable. (Dies ist optional für das hier beschriebene Beispiel, die Aktivierung kann grundsätzlich auch über einen Menübefehl erfolgen.)</p></li><li class="step"><p>Fügen Sie im Gerätebaum unterhalb der Applikation mit dem Befehl <span class="guilabel">Objekt hinzufügen</span> ein Objekt <span class="guilabel">Profiler</span> hinzu.</p></li><li class="step"><p>Doppelklicken Sie auf das Objekt.</p><div class="result"><p>Der Editor für das Objekt öffnet sich. Registerkarte <span class="inlinemediaobject"><img src="image/uuid-d10d41e9-7663-c462-f6d9-07c335e8a4dd.png" alt="_prf_icon_settings.png"></img></span> <span class="guilabel">Einstellungen</span> ist im Vordergrund.</p></div></li><li class="step"><p>Wählen Sie als <span class="guilabel">Methode</span> die Option <span class="guilabel">Instrumentierung</span>. Wählen Sie die <span class="guilabel">Task</span> aus, für deren Bausteinaufrufe Sie Zeitmessungen durchführen möchten.</p></li><li class="step"><p>Wählen Sie unter <span class="guilabel">Aufzeichnung</span> die Task, die die zu messenden Bausteine steuert.</p><p>Klicken Sie bei <span class="guilabel">Bedingung</span> auf die Schaltfläche <span class="inlinemediaobject"><img src="image/uuid-b57a4bb3-a633-38bc-da78-b44b05e3fa5f.png" alt="_cds_icon_three_dots.png"></img></span> und wählen Sie die boolesche Variable aus Ihrer Applikation aus, über die Sie die Werteaufzeichnung aus- und einschalten möchten. Hinweis: Die Verwendung einer solchen Variablen ist optional. Wenn Sie das Feld leer lassen, wird jeder Zyklus aufgezeichnet.</p></li><li class="step"><p>Stellen Sie in <span class="guilabel">Instrumentierungsparameter</span> den <span class="guilabel">Aufzeichnungsmodus</span> ein, hier zum Beispiel: <span class="guilabel">Nächsten Zyklus aufzeichnen</span>. Belassen Sie als benötigte <span class="guilabel">Puffergröße</span> (maximale Anzahl der Bausteinaufrufe, die pro Taskzyklus aufgezeichnet werden) die Voreinstellung <span class="guilabel">10000</span>.</p><p>Wählen Sie bei <span class="guilabel">Darstellung der Momentaufnahme</span> das <span class="guilabel">Zeitformat</span> für die Darstellung der Aufzeichnungen.</p></li><li class="step"><p>Setzen Sie in der <span class="guilabel">Bausteinauswahl</span> Häkchen für die Bausteine, die gemessen werden sollen. Hinweis: Alternativ könnten Sie auch die „Gesamte Applikation instrumentieren“, was neben allen Bausteinen des Projekts auch die Bausteine der eingebundenen Bibliotheken einschließen würde.</p></li><li class="step"><p>Laden Sie die Applikation auf die Steuerung: Befehl <span class="guimenu">Online → Einloggen</span>.</p><div class="result"><p>In der Statuszeile von <span class="phrase">CODESYS</span> erscheint die Anzeige <span class="inlinemediaobject"><img src="image/uuid-4f7e6052-7123-0daf-fca4-1b66b7fe0bc6.png" alt="_prf_img_status.png"></img></span>.</p></div></li><li class="step"><p>Starten Sie die Applikation: Befehl <span class="guimenu">Online → Start</span>.</p><div class="result"><p>Das Projekt läuft, Sie sehen in den üblichen Monitoring-Ansichten die aktuellen Variablenwerte.</p></div></li><li class="step"><p>Wenn Sie eine boolsche Variable als Bedingung für das Starten des Profilings konfiguriert haben, setzen Sie diese Variable nun auf <code class="code">TRUE</code>.</p><p>Hintergrundinformation zur Aufzeichnung: Da Sie in diesem Beispiel hier die Option <span class="guilabel">Nächsten Zyklus aufzeichnen</span> gewählt haben, wird beim Starten der Applikation und des Profilings der erste Zyklus und kein weiterer aufgezeichnet. Eine weitere Messung erfolgt erst dann, wenn eine Aufzeichnung von der Steuerung hochgeladen wird. Dieses Hochladen erfolgt entweder durch das erstmalige Öffnen der Registerkarte <span class="guilabel">Online</span>, oder durch Betätigen der Schaltfläche <span class="guilabel">Diese Momentaufnahme aktualisieren</span>). Zur Alternativoption <span class="guilabel">Längsten Zyklus aufzeichnen</span> sehen Sie im Referenzteil der Hilfe: Registerkarte ‚Einstellungen‘.</p><p>Sehen Sie sich nun die Messergebnisse an. Öffnen Sie dazu den Editor des Profiler-Objekts und dessen Registerkarte <span class="guilabel">Online</span>.</p><div class="result"><p>Die Registerkarte <span class="inlinemediaobject"><img src="image/uuid-eb1d87eb-694e-efa4-a9c7-4fe651f71c44.png" alt="_prf_icon_online.png"></img></span> <span class="guilabel">Online</span> bietet vier Unterregisterkarten, die über die Reiter links ausgewählt werden können. Zusätzlich sehen Sie ein Feld mit Schaltflächen und Einstellungen für das aktuell laufende Profiling. Für weitere Informationen siehe: <a class="link linktype-component" href="_prf_obj_profiler_online.html" title="Registerkarte: Online">Registerkarte ‚Online‘</a></p></div></li></ol></div><div class="procedure" id="idp1857"><div class="procedure-title"><span class="formal-label"><span class="formal-label-text">Prozedur</span><span class="formal-label-delimiter">. </span></span><span class="formal-title">Erweiterte Informationen zu einem Bausteinaufruf im Dialog <span class="guilabel">Eigenschaften</span></span></div><ol class="procedure" type="1"><li class="step"><p>Wählen Sie auf der Registerkarte <span class="guilabel">Online</span> die Unterregisterkarte <span class="guilabel">Aufrufbaum</span>.</p><div class="result"><p>Sie sehen die Hierarchie aller Aufrufe, die von der im Dialog <span class="guilabel"><a class="link linktype-component" href="_prf_obj_profiler_settings.html" title="Registerkarte: Einstellungen">Einstellungen</a></span> eingetragenen Task ausgingen.</p></div></li><li class="step"><p>Selektieren Sie einen der Aufrufe und wählen Sie aus dem Kontextmenü den Befehl <span class="guilabel">Eigenschaften</span></p><div class="result"><p>Der Dialog <span class="guilabel"><a class="link linktype-component" href="_prf_cmd_context_properties.html" title="Befehl: Eigenschaften">Eigenschaften</a></span> für den aufgerufenen Baustein öffnet sich mit zusätzlichen Informationen wie <span class="guilabel">Own Time</span> und <span class="guilabel">Standardabweichung</span>.</p></div></li></ol></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In diesem Abschnitt<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><!-- empty footer removed from here --></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-526ddabd-8be1-8c72-0d8c-9bd074757f66">Profiling durch Code-Instrumentierung</a></li><li><a href="#idp1772">Aktivieren und Durchführen des Profilings mit Hilfe von Instrumentierung</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Suchresultat</h2><ul class="searchresults"></ul><p class="noresults"></p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:help-feedback@codesys.com?subject=Feedback%20for%20help%20topic%20%22Profiling%20durch%20Code-Instrumentierung%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Profiling%20durch%20Code-Instrumentierung%22%20in%20the%20publication%20%22CODESYS%20Profiler%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Möchten Sie uns Feedback geben? Klicken Sie hier, um Änderungen vorzuschlagen.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="_prf_profiling_methods_overview.html">Zurück</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="_prf_using_profiling_by_instrumentation.html#idp1772">Weiter</a></li></ul></div>
<footer id="page-footer" class="background-dark-blue"></footer>

</div></div></div></div></body></html>
<!-- last generated: 2025-04-10 08:18:01 -->
